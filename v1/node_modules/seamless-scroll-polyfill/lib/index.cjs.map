{"version":3,"file":"index.cjs","sources":["../src/common.ts","../src/scroll-end-event.ts","../src/scroll-step.ts","../src/scroll.ts","../src/scrollIntoView.ts","../src/scroll.polyfill.ts","../src/scrollIntoView.polyfill.ts","../src/polyfill.ts"],"sourcesContent":["import type { IScrollConfig } from \"./scroll-step.js\";\n\nexport const checkBehavior = (behavior?: string): behavior is undefined | ScrollBehavior => {\n    return behavior === undefined || behavior === \"auto\" || behavior === \"instant\" || behavior === \"smooth\";\n};\n\nexport function elementScrollXY(this: Element, x: number, y: number): void {\n    this.scrollLeft = x;\n    this.scrollTop = y;\n}\n\nexport const failedExecute = (method: string, object: string, reason = \"cannot convert to dictionary.\"): string =>\n    `Failed to execute '${method}' on '${object}': ${reason}`;\n\nexport const failedExecuteInvalidEnumValue = (method: string, object: string, value: string): string =>\n    failedExecute(method, object, `The provided value '${value}' is not a valid enum value of type ScrollBehavior.`);\n\ninterface BackupMethod {\n    <K extends keyof Element>(proto: Element, method: K): Element[K] | undefined;\n    <K extends keyof Element>(proto: Element, method: K, fallback: unknown): Element[K];\n    <K extends keyof Window>(proto: Window, method: K): Window[K] | undefined;\n    <K extends keyof Window>(proto: Window, method: K, fallback: unknown): Window[K];\n}\n\n/* eslint-disable */\nexport const backupMethod: BackupMethod = (proto: any, method: string, fallback?: unknown) => {\n    const backup = `__SEAMLESS.BACKUP$${method}`;\n\n    if (!proto[backup] && proto[method] && !proto[method]?.__isPolyfill) {\n        proto[backup] = proto[method];\n    }\n\n    return proto[backup] || fallback;\n};\n/* eslint-enable */\n\nexport const isObject = (value: unknown): boolean => {\n    const type = typeof value;\n    return value !== null && (type === \"object\" || type === \"function\");\n};\n\nexport const isScrollBehaviorSupported = (config?: IScrollConfig): boolean =>\n    \"scrollBehavior\" in window.document.documentElement.style && config?.forcePolyfill !== true;\n\nexport const markPolyfill = (method: () => void): void => {\n    Object.defineProperty(method, \"__isPolyfill\", { value: true });\n};\n\ntype Prototype = typeof HTMLElement.prototype | typeof SVGElement.prototype | typeof Element.prototype;\n\nexport const modifyPrototypes = <T extends \"scroll\" | \"scrollTo\" | \"scrollBy\" | \"scrollIntoView\">(\n    prop: T,\n    func: Prototype[T],\n): void => {\n    markPolyfill(func);\n    [HTMLElement.prototype, SVGElement.prototype, Element.prototype].forEach((prototype) => {\n        backupMethod(prototype, prop);\n        prototype[prop] = func;\n    });\n};\n\n/**\n * - On Chrome and Firefox, document.scrollingElement will return the <html> element.\n * - Safari, document.scrollingElement will return the <body> element.\n * - On Edge, document.scrollingElement will return the <body> element.\n * - IE11 does not support document.scrollingElement, but you can assume its <html>.\n */\nexport const scrollingElement = (element: Element): Element =>\n    element.ownerDocument.scrollingElement || element.ownerDocument.documentElement;\n","export function scrollEndEvent(bubbles: boolean): Event {\n    if (typeof Event === \"function\") {\n        return new Event(\"scrollend\", {\n            bubbles,\n            cancelable: false,\n        });\n    }\n\n    const event = document.createEvent(\"Event\");\n    event.initEvent(\"scrollend\", bubbles, false);\n\n    return event;\n}\n","export interface IScrollConfig {\n    readonly duration?: number;\n    readonly forcePolyfill?: boolean;\n    readonly timingFunc?: (k: number) => number;\n}\n\nexport interface IContext extends IScrollConfig {\n    readonly timeStamp: number;\n    readonly startX: number;\n    readonly startY: number;\n    readonly targetX: number;\n    readonly targetY: number;\n    readonly method: (x: number, y: number) => void;\n    readonly callback: () => void;\n    rafId: number;\n}\n\nconst ease = (k: number) => {\n    return 0.5 * (1 - Math.cos(Math.PI * k));\n};\n\n/* eslint-disable */\nexport function now(): number {\n    let fn: () => number;\n    if (window.performance?.now) {\n        fn = () => window.performance.now();\n    } else {\n        fn = () => window.Date.now();\n    }\n\n    // @ts-ignore\n    now = fn;\n    return fn();\n}\n/* eslint-enable */\n\nconst DURATION = 500;\n\nexport const step = (context: IContext): void => {\n    const currentTime = now();\n\n    const elapsed = (currentTime - context.timeStamp) / (context.duration || DURATION);\n    if (elapsed > 1) {\n        context.method(context.targetX, context.targetY);\n        context.callback();\n        return;\n    }\n    const value = (context.timingFunc || ease)(elapsed);\n\n    const currentX = context.startX + (context.targetX - context.startX) * value;\n    const currentY = context.startY + (context.targetY - context.startY) * value;\n\n    context.method(currentX, currentY);\n\n    context.rafId = window.requestAnimationFrame(() => {\n        step(context);\n    });\n};\n","import {\n    backupMethod,\n    checkBehavior,\n    elementScrollXY,\n    failedExecute,\n    failedExecuteInvalidEnumValue,\n    isObject,\n    scrollingElement,\n} from \"./common.js\";\nimport { scrollEndEvent } from \"./scroll-end-event.js\";\nimport type { IContext, IScrollConfig } from \"./scroll-step.js\";\nimport { now, step } from \"./scroll-step.js\";\n\n// https://drafts.csswg.org/cssom-view/#normalize-non-finite-values\nconst nonFinite = (value: unknown): number => {\n    if (!isFinite(value as number)) {\n        return 0;\n    }\n    return Number(value);\n};\n\nconst isConnected = (node: Node) => {\n    return (\n        node.isConnected ??\n        (!node.ownerDocument ||\n            // eslint-disable-next-line no-bitwise\n            !(node.ownerDocument.compareDocumentPosition(node) & /** DOCUMENT_POSITION_DISCONNECTED */ 1))\n    );\n};\n\nconst scrollWithOptions = (element: Element, options: Readonly<ScrollToOptions>, config?: IScrollConfig): void => {\n    if (!isConnected(element)) {\n        return;\n    }\n\n    const startX = element.scrollLeft;\n    const startY = element.scrollTop;\n\n    const targetX = nonFinite(options.left ?? startX);\n    const targetY = nonFinite(options.top ?? startY);\n\n    if (targetX === startX && targetY === startY) {\n        return;\n    }\n\n    const fallback = backupMethod(HTMLElement.prototype, \"scroll\", elementScrollXY);\n    const method = backupMethod(Object.getPrototypeOf(element) as Element, \"scroll\", fallback).bind(element);\n\n    if (options.behavior !== \"smooth\") {\n        method(targetX, targetY);\n        return;\n    }\n\n    const removeEventListener = () => {\n        window.removeEventListener(\"wheel\", cancelScroll);\n        window.removeEventListener(\"touchmove\", cancelScroll);\n    };\n\n    const callback = () => {\n        removeEventListener();\n        const isDocument = element.nodeType === /** Node.DOCUMENT_NODE */ 9;\n        element.dispatchEvent(scrollEndEvent(isDocument));\n    };\n\n    const context: IContext = {\n        ...config,\n        timeStamp: now(),\n        startX,\n        startY,\n        targetX,\n        targetY,\n        rafId: 0,\n        method,\n        callback,\n    };\n\n    const cancelScroll = () => {\n        window.cancelAnimationFrame(context.rafId);\n        removeEventListener();\n    };\n\n    window.addEventListener(\"wheel\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n    window.addEventListener(\"touchmove\", cancelScroll, {\n        passive: true,\n        once: true,\n    });\n\n    step(context);\n};\n\nconst isWindow = (obj: unknown): obj is Window => (obj as Window).window === obj;\n\ntype ScrollMethod<T extends Element | typeof window> = (\n    target: T,\n    scrollOptions?: ScrollToOptions,\n    config?: IScrollConfig,\n) => void;\n\nconst createScroll =\n    <T extends Element | typeof window>(scrollName: \"scroll\" | \"scrollTo\" | \"scrollBy\"): ScrollMethod<T> =>\n    (target, scrollOptions, config): void => {\n        const [element, scrollType]: [Element, \"Window\" | \"Element\"] = isWindow(target)\n            ? [scrollingElement(target.document.documentElement), \"Window\"]\n            : [target, \"Element\"];\n\n        const options = scrollOptions ?? {};\n\n        if (!isObject(options)) {\n            throw new TypeError(failedExecute(scrollName, scrollType));\n        }\n\n        if (!checkBehavior(options.behavior)) {\n            throw new TypeError(failedExecuteInvalidEnumValue(scrollName, scrollType, options.behavior));\n        }\n\n        if (scrollName === \"scrollBy\") {\n            options.left = nonFinite(options.left) + element.scrollLeft;\n            options.top = nonFinite(options.top) + element.scrollTop;\n        }\n\n        scrollWithOptions(element, options, config);\n    };\n\nexport const scroll = /* #__PURE__ */ createScroll(\"scroll\");\nexport const scrollTo = /* #__PURE__ */ createScroll(\"scrollTo\");\nexport const scrollBy = /* #__PURE__ */ createScroll(\"scrollBy\");\n\nexport const elementScroll = scroll as ScrollMethod<Element>;\nexport const elementScrollTo = scrollTo as ScrollMethod<Element>;\nexport const elementScrollBy = scrollBy as ScrollMethod<Element>;\n\nexport const windowScroll = scroll as ScrollMethod<typeof window>;\nexport const windowScrollTo = scrollTo as ScrollMethod<typeof window>;\nexport const windowScrollBy = scrollBy as ScrollMethod<typeof window>;\n","/* eslint-disable no-bitwise */\nimport { checkBehavior, failedExecuteInvalidEnumValue, scrollingElement } from \"./common.js\";\nimport type { IScrollConfig } from \"./scroll-step.js\";\nimport { elementScroll } from \"./scroll.js\";\n\nconst enum ScrollAlignment {\n    ToEdgeIfNeeded,\n    CenterAlways,\n    LeftOrTop,\n    RightOrBottom,\n}\n\nconst enum WritingMode {\n    HorizontalTb,\n    VerticalRl,\n    VerticalLr,\n    SidewaysRl,\n    SidewaysLr,\n}\n\n// https://drafts.csswg.org/css-writing-modes-4/#block-flow\nconst normalizeWritingMode = (writingMode: string): WritingMode => {\n    switch (writingMode) {\n        case \"horizontal-tb\":\n        case \"lr\":\n        case \"lr-tb\":\n        case \"rl\":\n        case \"rl-tb\":\n            return WritingMode.HorizontalTb;\n\n        case \"vertical-rl\":\n        case \"tb\":\n        case \"tb-rl\":\n            return WritingMode.VerticalRl;\n\n        case \"vertical-lr\":\n        case \"tb-lr\":\n            return WritingMode.VerticalLr;\n\n        case \"sideways-rl\":\n            return WritingMode.SidewaysRl;\n\n        case \"sideways-lr\":\n            return WritingMode.SidewaysLr;\n    }\n\n    return WritingMode.HorizontalTb;\n};\n\ntype Tuple2<T> = [T, T];\n\nconst calcPhysicalAxis = <T>(writingMode: WritingMode, isLTR: boolean, hPos: T, vPos: T): [number, T, T] => {\n    /**  0b{vertical}{horizontal}  0: normal, 1: reverse */\n    let layout = 0b00;\n\n    const enum OP {\n        ReverseHorizontal = 0b01,\n        ReverseVertical = 0b10,\n    }\n\n    /**\n     * WritingMode.VerticalLr: ↓→\n     * | 1 | 4 |   |\n     * | 2 | 5 |   |\n     * | 3 |   |   |\n     *\n     * RTL: ↑→\n     * | 3 |   |   |\n     * | 2 | 5 |   |\n     * | 1 | 4 |   |\n     */\n    if (!isLTR) {\n        layout ^= OP.ReverseVertical;\n    }\n\n    switch (writingMode) {\n        /**\n         * ↓→\n         * | 1 | 2 | 3 |\n         * | 4 | 5 |   |\n         * |   |   |   |\n         *\n         * RTL: ↓←\n         * | 3 | 2 | 1 |\n         * |   | 5 | 4 |\n         * |   |   |   |\n         */\n        case WritingMode.HorizontalTb:\n            // swap horizontal and vertical\n            layout = (layout >> 1) | ((layout & 1) << 1);\n            [hPos, vPos] = [vPos, hPos];\n            break;\n\n        /**\n         * ↓←\n         * |   | 4 | 1 |\n         * |   | 5 | 2 |\n         * |   |   | 3 |\n         *\n         * RTL: ↑←\n         * |   |   | 3 |\n         * |   | 5 | 2 |\n         * |   | 4 | 1 |\n         */\n        case WritingMode.VerticalRl:\n        case WritingMode.SidewaysRl:\n            //  reverse horizontal\n            layout ^= OP.ReverseHorizontal;\n            break;\n\n        /**\n         * ↑→\n         * | 3 |   |   |\n         * | 2 | 5 |   |\n         * | 1 | 4 |   |\n         *\n         * RTL: ↓→\n         * | 1 | 4 |   |\n         * | 2 | 5 |   |\n         * | 3 |   |   |\n         */\n        case WritingMode.SidewaysLr:\n            // reverse vertical\n            layout ^= OP.ReverseVertical;\n            break;\n    }\n\n    return [layout, hPos, vPos];\n};\n\nconst isXReversed = (computedStyle: Readonly<CSSStyleDeclaration>): boolean => {\n    const layout = calcPhysicalAxis(\n        normalizeWritingMode(computedStyle.writingMode),\n        computedStyle.direction !== \"rtl\",\n        undefined,\n        undefined,\n    )[0];\n    return (layout & 1) === 1;\n};\n\n// https://source.chromium.org/chromium/chromium/src/+/main:third_party/blink/renderer/core/dom/element.cc;l=1097-1189;drc=6a7533d4a1e9f2372223a9d912a9e53a6fa35ae0\nconst toPhysicalAlignment = (\n    options: Readonly<ScrollIntoViewOptions>,\n    writingMode: WritingMode,\n    isLTR: boolean,\n): Tuple2<ScrollAlignment> => {\n    const [layout, hPos, vPos] = calcPhysicalAxis(\n        writingMode,\n        isLTR,\n        options.block || \"start\",\n        options.inline || \"nearest\",\n    );\n\n    return [hPos, vPos].map((value, index) => {\n        switch (value) {\n            case \"center\":\n                return ScrollAlignment.CenterAlways;\n            case \"nearest\":\n                return ScrollAlignment.ToEdgeIfNeeded;\n\n            default: {\n                const reverse = (layout >> index) & 1;\n                return (value === \"start\") === !reverse ? ScrollAlignment.LeftOrTop : ScrollAlignment.RightOrBottom;\n            }\n        }\n    }) as Tuple2<ScrollAlignment>;\n};\n\n// code from stipsan/compute-scroll-into-view\n// https://github.com/stipsan/compute-scroll-into-view/blob/5396c6b78af5d0bbce11a7c4e93cc3146546fcd3/src/index.ts\n/**\n * Find out which edge to align against when logical scroll position is \"nearest\"\n * Interesting fact: \"nearest\" works similarily to \"if-needed\", if the element is fully visible it will not scroll it\n *\n * Legends:\n * ┌────────┐ ┏ ━ ━ ━ ┓\n * │ target │   frame\n * └────────┘ ┗ ━ ━ ━ ┛\n */\nconst mapNearest = (\n    align: ScrollAlignment,\n    scrollingEdgeStart: number,\n    scrollingEdgeEnd: number,\n    scrollingSize: number,\n    elementEdgeStart: number,\n    elementEdgeEnd: number,\n    elementSize: number,\n): Exclude<ScrollAlignment, ScrollAlignment.ToEdgeIfNeeded> | null => {\n    if (align !== ScrollAlignment.ToEdgeIfNeeded) {\n        return align;\n    }\n\n    /**\n     * If element edge A and element edge B are both outside scrolling box edge A and scrolling box edge B\n     *\n     *          ┌──┐\n     *        ┏━│━━│━┓\n     *          │  │\n     *        ┃ │  │ ┃        do nothing\n     *          │  │\n     *        ┗━│━━│━┛\n     *          └──┘\n     *\n     *  If element edge C and element edge D are both outside scrolling box edge C and scrolling box edge D\n     *\n     *    ┏ ━ ━ ━ ━ ┓\n     *   ┌───────────┐\n     *   │┃         ┃│        do nothing\n     *   └───────────┘\n     *    ┗ ━ ━ ━ ━ ┛\n     */\n    if (\n        (elementEdgeStart < scrollingEdgeStart && elementEdgeEnd > scrollingEdgeEnd) ||\n        (elementEdgeStart > scrollingEdgeStart && elementEdgeEnd < scrollingEdgeEnd)\n    ) {\n        return null;\n    }\n\n    /**\n     * If element edge A is outside scrolling box edge A and element height is less than scrolling box height\n     *\n     *          ┌──┐\n     *        ┏━│━━│━┓         ┏━┌━━┐━┓\n     *          └──┘             │  │\n     *  from  ┃      ┃     to  ┃ └──┘ ┃\n     *\n     *        ┗━ ━━ ━┛         ┗━ ━━ ━┛\n     *\n     * If element edge B is outside scrolling box edge B and element height is greater than scrolling box height\n     *\n     *        ┏━ ━━ ━┓         ┏━┌━━┐━┓\n     *                           │  │\n     *  from  ┃ ┌──┐ ┃     to  ┃ │  │ ┃\n     *          │  │             │  │\n     *        ┗━│━━│━┛         ┗━│━━│━┛\n     *          │  │             └──┘\n     *          │  │\n     *          └──┘\n     *\n     * If element edge C is outside scrolling box edge C and element width is less than scrolling box width\n     *\n     *       from                 to\n     *    ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *  ┌───┐                 ┌───┐\n     *  │ ┃ │       ┃         ┃   │     ┃\n     *  └───┘                 └───┘\n     *    ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     * If element edge D is outside scrolling box edge D and element width is greater than scrolling box width\n     *\n     *       from                 to\n     *    ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *        ┌───────────┐   ┌───────────┐\n     *    ┃   │     ┃     │   ┃         ┃ │\n     *        └───────────┘   └───────────┘\n     *    ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     */\n    if (\n        (elementEdgeStart <= scrollingEdgeStart && elementSize <= scrollingSize) ||\n        (elementEdgeEnd >= scrollingEdgeEnd && elementSize >= scrollingSize)\n    ) {\n        return ScrollAlignment.LeftOrTop;\n    }\n\n    /**\n     * If element edge B is outside scrolling box edge B and element height is less than scrolling box height\n     *\n     *        ┏━ ━━ ━┓         ┏━ ━━ ━┓\n     *\n     *  from  ┃      ┃     to  ┃ ┌──┐ ┃\n     *          ┌──┐             │  │\n     *        ┗━│━━│━┛         ┗━└━━┘━┛\n     *          └──┘\n     *\n     * If element edge A is outside scrolling box edge A and element height is greater than scrolling box height\n     *\n     *          ┌──┐\n     *          │  │\n     *          │  │             ┌──┐\n     *        ┏━│━━│━┓         ┏━│━━│━┓\n     *          │  │             │  │\n     *  from  ┃ └──┘ ┃     to  ┃ │  │ ┃\n     *                           │  │\n     *        ┗━ ━━ ━┛         ┗━└━━┘━┛\n     *\n     * If element edge C is outside scrolling box edge C and element width is greater than scrolling box width\n     *\n     *           from                 to\n     *        ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *  ┌───────────┐           ┌───────────┐\n     *  │     ┃     │   ┃       │ ┃         ┃\n     *  └───────────┘           └───────────┘\n     *        ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     * If element edge D is outside scrolling box edge D and element width is less than scrolling box width\n     *\n     *           from                 to\n     *        ┏ ━ ━ ━ ━ ┓         ┏ ━ ━ ━ ━ ┓\n     *                ┌───┐             ┌───┐\n     *        ┃       │ ┃ │       ┃     │   ┃\n     *                └───┘             └───┘\n     *        ┗ ━ ━ ━ ━ ┛         ┗ ━ ━ ━ ━ ┛\n     *\n     */\n    if (\n        (elementEdgeEnd > scrollingEdgeEnd && elementSize < scrollingSize) ||\n        (elementEdgeStart < scrollingEdgeStart && elementSize > scrollingSize)\n    ) {\n        return ScrollAlignment.RightOrBottom;\n    }\n\n    return null;\n};\n\nconst canOverflow = (overflow: string | null): boolean => {\n    return overflow !== \"visible\" && overflow !== \"clip\";\n};\n\nconst getFrameElement = (element: Element): Element | null => {\n    try {\n        return element.ownerDocument.defaultView?.frameElement || null;\n    } catch {\n        return null;\n    }\n};\n\nconst isScrollable = (element: Element, computedStyle: Readonly<CSSStyleDeclaration>): boolean => {\n    if (element.clientHeight < element.scrollHeight || element.clientWidth < element.scrollWidth) {\n        return (\n            canOverflow(computedStyle.overflowY) ||\n            canOverflow(computedStyle.overflowX) ||\n            element === scrollingElement(element)\n        );\n    }\n\n    return false;\n};\n\nconst parentElement = (element: Element): Element | null => {\n    const pNode = element.parentNode;\n    const pElement = element.parentElement;\n\n    if (pElement === null && pNode !== null) {\n        if (pNode.nodeType === /** Node.DOCUMENT_FRAGMENT_NODE */ 11) {\n            return (pNode as ShadowRoot).host;\n        }\n        if (pNode.nodeType === /** Node.DOCUMENT_NODE */ 9) {\n            return getFrameElement(element);\n        }\n    }\n\n    return pElement;\n};\n\nconst clamp = (value: number, min: number, max: number): number => {\n    if (value < min) {\n        return min;\n    }\n\n    if (value > max) {\n        return max;\n    }\n\n    return value;\n};\n\nconst getSupportedScrollMarginProperty = (\n    ownerDocument: Document,\n): \"scroll-margin\" | \"scroll-snap-margin\" | undefined => {\n    // Webkit uses \"scroll-snap-margin\" https://bugs.webkit.org/show_bug.cgi?id=189265.\n    return ([\"scroll-margin\", \"scroll-snap-margin\"] as const).filter(\n        (property) => property in ownerDocument.documentElement.style,\n    )[0];\n};\n\nconst getElementScrollSnapArea = (\n    element: Element,\n    elementRect: Readonly<DOMRect>,\n    computedStyle: Readonly<CSSStyleDeclaration>,\n): [top: number, right: number, bottom: number, left: number] => {\n    const { top, right, bottom, left } = elementRect;\n    const scrollProperty = getSupportedScrollMarginProperty(element.ownerDocument);\n    if (!scrollProperty) {\n        return [top, right, bottom, left];\n    }\n\n    const scrollMarginValue = (edge: \"top\" | \"right\" | \"bottom\" | \"left\"): number => {\n        const value = computedStyle.getPropertyValue(`${scrollProperty}-${edge}`);\n        return parseInt(value, 10) || 0;\n    };\n\n    return [\n        top - scrollMarginValue(\"top\"),\n        right + scrollMarginValue(\"right\"),\n        bottom + scrollMarginValue(\"bottom\"),\n        left - scrollMarginValue(\"left\"),\n    ];\n};\n\nconst calcAlignEdge = (align: ScrollAlignment, start: number, end: number): number => {\n    switch (align) {\n        case ScrollAlignment.CenterAlways:\n            return (start + end) / 2;\n\n        case ScrollAlignment.RightOrBottom:\n            return end;\n\n        case ScrollAlignment.LeftOrTop:\n        case ScrollAlignment.ToEdgeIfNeeded:\n            return start;\n    }\n};\n\nconst getFrameViewport = (frame: Element, frameRect: Readonly<DOMRect>) => {\n    const visualViewport = frame.ownerDocument.defaultView?.visualViewport;\n    const [x, y, width, height] =\n        frame === scrollingElement(frame)\n            ? [0, 0, visualViewport?.width ?? frame.clientWidth, visualViewport?.height ?? frame.clientHeight]\n            : [frameRect.left, frameRect.top, frame.clientWidth, frame.clientHeight];\n\n    const left = x + frame.clientLeft;\n    const top = y + frame.clientTop;\n    const right = left + width;\n    const bottom = top + height;\n\n    return [top, right, bottom, left] as const;\n};\n\nconst computeScrollIntoView = (element: Element, options: ScrollIntoViewOptions): [Element, ScrollToOptions][] => {\n    // Collect all the scrolling boxes, as defined in the spec: https://drafts.csswg.org/cssom-view/#scrolling-box\n    const actions: [Element, ScrollToOptions][] = [];\n\n    let ownerDocument = element.ownerDocument;\n    let ownerWindow = ownerDocument.defaultView;\n\n    if (!ownerWindow) {\n        return actions;\n    }\n\n    const computedStyle = window.getComputedStyle(element);\n    const isLTR = computedStyle.direction !== \"rtl\";\n\n    const writingMode = normalizeWritingMode(\n        computedStyle.writingMode ||\n            computedStyle.getPropertyValue(\"-webkit-writing-mode\") ||\n            computedStyle.getPropertyValue(\"-ms-writing-mode\"),\n    );\n\n    const [alignH, alignV] = toPhysicalAlignment(options, writingMode, isLTR);\n\n    let [top, right, bottom, left] = getElementScrollSnapArea(element, element.getBoundingClientRect(), computedStyle);\n\n    for (let frame = parentElement(element); frame !== null; frame = parentElement(frame)) {\n        if (ownerDocument !== frame.ownerDocument) {\n            ownerDocument = frame.ownerDocument;\n            ownerWindow = ownerDocument.defaultView;\n            if (!ownerWindow) {\n                break;\n            }\n\n            const { left: dX, top: dY } = frame.getBoundingClientRect();\n            top += dY;\n            right += dX;\n            bottom += dY;\n            left += dX;\n        }\n\n        const frameStyle = ownerWindow.getComputedStyle(frame);\n\n        if (frameStyle.position === \"fixed\") {\n            break;\n        }\n\n        if (!isScrollable(frame, frameStyle)) {\n            continue;\n        }\n\n        const frameRect = frame.getBoundingClientRect();\n\n        const [frameTop, frameRight, frameBottom, frameLeft] = getFrameViewport(frame, frameRect);\n\n        const eAlignH = mapNearest(alignH, frameLeft, frameRight, frame.clientWidth, left, right, right - left);\n        const eAlignV = mapNearest(alignV, frameTop, frameBottom, frame.clientHeight, top, bottom, bottom - top);\n\n        const diffX =\n            eAlignH === null ? 0 : calcAlignEdge(eAlignH, left, right) - calcAlignEdge(eAlignH, frameLeft, frameRight);\n        const diffY =\n            eAlignV === null ? 0 : calcAlignEdge(eAlignV, top, bottom) - calcAlignEdge(eAlignV, frameTop, frameBottom);\n\n        const moveX = isXReversed(frameStyle)\n            ? clamp(diffX, -frame.scrollWidth + frame.clientWidth - frame.scrollLeft, -frame.scrollLeft)\n            : clamp(diffX, -frame.scrollLeft, frame.scrollWidth - frame.clientWidth - frame.scrollLeft);\n        const moveY = clamp(diffY, -frame.scrollTop, frame.scrollHeight - frame.clientHeight - frame.scrollTop);\n\n        actions.push([\n            frame,\n            { left: frame.scrollLeft + moveX, top: frame.scrollTop + moveY, behavior: options.behavior },\n        ]);\n\n        top = Math.max(top - moveY, frameTop);\n        right = Math.min(right - moveX, frameRight);\n        bottom = Math.min(bottom - moveY, frameBottom);\n        left = Math.max(left - moveX, frameLeft);\n    }\n\n    return actions;\n};\n\nexport const scrollIntoView = (\n    element: Element,\n    scrollIntoViewOptions?: ScrollIntoViewOptions,\n    config?: IScrollConfig,\n): void => {\n    const options = scrollIntoViewOptions || {};\n\n    if (!checkBehavior(options.behavior)) {\n        throw new TypeError(failedExecuteInvalidEnumValue(\"scrollIntoView\", \"Element\", options.behavior));\n    }\n\n    const actions = computeScrollIntoView(element, options);\n\n    actions.forEach(([frame, scrollToOptions]) => {\n        elementScroll(frame, scrollToOptions, config);\n    });\n};\n\nexport const elementScrollIntoView = scrollIntoView;\n","import { backupMethod, isScrollBehaviorSupported, markPolyfill, modifyPrototypes } from \"./common.js\";\nimport type { IScrollConfig } from \"./scroll-step.js\";\nimport { scroll, scrollBy, scrollTo } from \"./scroll.js\";\n\ntype ScrollName = \"scroll\" | \"scrollTo\" | \"scrollBy\";\n\ntype Patch = <T extends ScrollName>(prop: T, func: (Element | typeof window)[T]) => void;\n\nconst createPolyfill =\n    (scrollName: ScrollName, patch: Patch) =>\n    (config?: IScrollConfig): void => {\n        if (isScrollBehaviorSupported(config)) {\n            return;\n        }\n\n        const scrollMethod = {\n            scroll,\n            scrollTo,\n            scrollBy,\n        }[scrollName];\n\n        patch(scrollName, function (this: Element | typeof window): void {\n            const args = arguments;\n            if (arguments.length === 1) {\n                scrollMethod(this, args[0] as ScrollToOptions, config);\n                return;\n            }\n\n            const left = args[0] as number;\n            const top = args[1] as number;\n            scrollMethod(this, { left, top });\n        });\n    };\n\nexport const elementScrollPolyfill = /* #__PURE__ */ createPolyfill(\"scroll\", modifyPrototypes);\nexport const elementScrollToPolyfill = /* #__PURE__ */ createPolyfill(\"scrollTo\", modifyPrototypes);\nexport const elementScrollByPolyfill = /* #__PURE__ */ createPolyfill(\"scrollBy\", modifyPrototypes);\n\nconst modifyWindow = <T extends \"scroll\" | \"scrollTo\" | \"scrollBy\">(prop: T, func: (typeof window)[T]): void => {\n    markPolyfill(func);\n    backupMethod(window, prop);\n    window[prop] = func;\n};\n\nexport const windowScrollPolyfill = /* #__PURE__ */ createPolyfill(\"scroll\", modifyWindow);\nexport const windowScrollToPolyfill = /* #__PURE__ */ createPolyfill(\"scrollTo\", modifyWindow);\nexport const windowScrollByPolyfill = /* #__PURE__ */ createPolyfill(\"scrollBy\", modifyWindow);\n","import { backupMethod, isObject, isScrollBehaviorSupported, modifyPrototypes } from \"./common.js\";\nimport type { IScrollConfig } from \"./scroll-step.js\";\nimport { elementScrollIntoView } from \"./scrollIntoView.js\";\n\nfunction elementScrollIntoViewBoolean(this: Element, alignToTop?: unknown) {\n    elementScrollIntoView(this, {\n        block: alignToTop ?? true ? \"start\" : \"end\",\n        inline: \"nearest\",\n    });\n}\n\nexport const elementScrollIntoViewPolyfill = (config?: IScrollConfig): void => {\n    if (isScrollBehaviorSupported(config)) {\n        return;\n    }\n\n    const originalFunc = backupMethod(window.HTMLElement.prototype, \"scrollIntoView\", elementScrollIntoViewBoolean);\n\n    modifyPrototypes(\"scrollIntoView\", function scrollIntoView(this: Element): void {\n        const args = arguments;\n        const options = args[0] as unknown;\n\n        if (args.length === 1 && isObject(options)) {\n            elementScrollIntoView(this, options as ScrollIntoViewOptions, config);\n            return;\n        }\n\n        originalFunc.apply(this, args as never);\n    });\n};\n","import { isScrollBehaviorSupported } from \"./common.js\";\nimport type { IScrollConfig } from \"./scroll-step.js\";\nimport {\n    elementScrollByPolyfill,\n    elementScrollPolyfill,\n    elementScrollToPolyfill,\n    windowScrollByPolyfill,\n    windowScrollPolyfill,\n    windowScrollToPolyfill,\n} from \"./scroll.polyfill.js\";\nimport { elementScrollIntoViewPolyfill } from \"./scrollIntoView.polyfill.js\";\n\nexport * from \"./scroll.polyfill.js\";\nexport * from \"./scrollIntoView.polyfill.js\";\n\nexport const polyfill = (config?: IScrollConfig): void => {\n    if (isScrollBehaviorSupported(config)) {\n        return;\n    }\n\n    elementScrollPolyfill(config);\n    elementScrollToPolyfill(config);\n    elementScrollByPolyfill(config);\n    elementScrollIntoViewPolyfill(config);\n\n    windowScrollPolyfill(config);\n    windowScrollToPolyfill(config);\n    windowScrollByPolyfill(config);\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAM,aAAa,GAAG,UAAC,QAAiB,EAAA;AAC3C,IAAA,OAAO,QAAQ,KAAK,SAAS,IAAI,QAAQ,KAAK,MAAM,IAAI,QAAQ,KAAK,SAAS,IAAI,QAAQ,KAAK,QAAQ,CAAC;AAC5G,CAAC,CAAC;AAEc,SAAA,eAAe,CAAgB,CAAS,EAAE,CAAS,EAAA;AAC/D,IAAA,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AACpB,IAAA,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACvB,CAAC;AAEM,IAAM,aAAa,GAAG,UAAC,MAAc,EAAE,MAAc,EAAE,MAAwC,EAAA;AAAxC,IAAA,IAAA,MAAA,KAAA,KAAA,CAAA,EAAA,EAAA,MAAwC,GAAA,+BAAA,CAAA,EAAA;AAClG,IAAA,OAAA,6BAAsB,MAAM,EAAA,QAAA,CAAA,CAAA,MAAA,CAAS,MAAM,EAAA,KAAA,CAAA,CAAA,MAAA,CAAM,MAAM,CAAE,CAAA;AAAzD,CAAyD,CAAC;AAEvD,IAAM,6BAA6B,GAAG,UAAC,MAAc,EAAE,MAAc,EAAE,KAAa,EAAA;IACvF,OAAA,aAAa,CAAC,MAAM,EAAE,MAAM,EAAE,sBAAA,CAAA,MAAA,CAAuB,KAAK,EAAA,qDAAA,CAAqD,CAAC,CAAA;AAAhH,CAAgH,CAAC;AASrH;AACO,IAAM,YAAY,GAAiB,UAAC,KAAU,EAAE,MAAc,EAAE,QAAkB,EAAA;;AACrF,IAAA,IAAM,MAAM,GAAG,oBAAqB,CAAA,MAAA,CAAA,MAAM,CAAE,CAAC;IAE7C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,IAAI,EAAC,MAAA,KAAK,CAAC,MAAM,CAAC,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,YAAY,CAAA,EAAE;QACjE,KAAK,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;AACjC,KAAA;AAED,IAAA,OAAO,KAAK,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC;AACrC,CAAC,CAAC;AACF;AAEO,IAAM,QAAQ,GAAG,UAAC,KAAc,EAAA;AACnC,IAAA,IAAM,IAAI,GAAG,OAAO,KAAK,CAAC;AAC1B,IAAA,OAAO,KAAK,KAAK,IAAI,KAAK,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,UAAU,CAAC,CAAC;AACxE,CAAC,CAAC;AAEK,IAAM,yBAAyB,GAAG,UAAC,MAAsB,EAAA;AAC5D,IAAA,OAAA,gBAAgB,IAAI,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK,IAAI,CAAA,MAAM,aAAN,MAAM,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAN,MAAM,CAAE,aAAa,MAAK,IAAI,CAAA;AAA3F,CAA2F,CAAC;AAEzF,IAAM,YAAY,GAAG,UAAC,MAAkB,EAAA;AAC3C,IAAA,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,cAAc,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AACnE,CAAC,CAAC;AAIK,IAAM,gBAAgB,GAAG,UAC5B,IAAO,EACP,IAAkB,EAAA;IAElB,YAAY,CAAC,IAAI,CAAC,CAAC;AACnB,IAAA,CAAC,WAAW,CAAC,SAAS,EAAE,UAAU,CAAC,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,UAAC,SAAS,EAAA;AAC/E,QAAA,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAC9B,QAAA,SAAS,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;AAC3B,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF;;;;;AAKG;AACI,IAAM,gBAAgB,GAAG,UAAC,OAAgB,EAAA;IAC7C,OAAA,OAAO,CAAC,aAAa,CAAC,gBAAgB,IAAI,OAAO,CAAC,aAAa,CAAC,eAAe,CAAA;AAA/E,CAA+E;;ACpE7E,SAAU,cAAc,CAAC,OAAgB,EAAA;AAC3C,IAAA,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;AAC7B,QAAA,OAAO,IAAI,KAAK,CAAC,WAAW,EAAE;AAC1B,YAAA,OAAO,EAAA,OAAA;AACP,YAAA,UAAU,EAAE,KAAK;AACpB,SAAA,CAAC,CAAC;AACN,KAAA;IAED,IAAM,KAAK,GAAG,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC5C,KAAK,CAAC,SAAS,CAAC,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AAE7C,IAAA,OAAO,KAAK,CAAC;AACjB;;ACKA,IAAM,IAAI,GAAG,UAAC,CAAS,EAAA;AACnB,IAAA,OAAO,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC;AAEF;SACgB,GAAG,GAAA;;AACf,IAAA,IAAI,EAAgB,CAAC;AACrB,IAAA,IAAI,MAAA,MAAM,CAAC,WAAW,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,GAAG,EAAE;QACzB,EAAE,GAAG,YAAM,EAAA,OAAA,MAAM,CAAC,WAAW,CAAC,GAAG,EAAE,CAAxB,EAAwB,CAAC;AACvC,KAAA;AAAM,SAAA;QACH,EAAE,GAAG,YAAM,EAAA,OAAA,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,CAAjB,EAAiB,CAAC;AAChC,KAAA;;IAGD,GAAG,GAAG,EAAE,CAAC;IACT,OAAO,EAAE,EAAE,CAAC;AAChB,CAAC;AACD;AAEA,IAAM,QAAQ,GAAG,GAAG,CAAC;AAEd,IAAM,IAAI,GAAG,UAAC,OAAiB,EAAA;AAClC,IAAA,IAAM,WAAW,GAAG,GAAG,EAAE,CAAC;AAE1B,IAAA,IAAM,OAAO,GAAG,CAAC,WAAW,GAAG,OAAO,CAAC,SAAS,KAAK,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,CAAC;IACnF,IAAI,OAAO,GAAG,CAAC,EAAE;QACb,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;QACjD,OAAO,CAAC,QAAQ,EAAE,CAAC;QACnB,OAAO;AACV,KAAA;AACD,IAAA,IAAM,KAAK,GAAG,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,EAAE,OAAO,CAAC,CAAC;AAEpD,IAAA,IAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,KAAK,CAAC;AAC7E,IAAA,IAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,KAAK,CAAC;AAE7E,IAAA,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAEnC,IAAA,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,qBAAqB,CAAC,YAAA;QACzC,IAAI,CAAC,OAAO,CAAC,CAAC;AAClB,KAAC,CAAC,CAAC;AACP,CAAC;;AC5CD;AACA,IAAM,SAAS,GAAG,UAAC,KAAc,EAAA;AAC7B,IAAA,IAAI,CAAC,QAAQ,CAAC,KAAe,CAAC,EAAE;AAC5B,QAAA,OAAO,CAAC,CAAC;AACZ,KAAA;AACD,IAAA,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC;AACzB,CAAC,CAAC;AAEF,IAAM,WAAW,GAAG,UAAC,IAAU,EAAA;;IAC3B,QACI,CAAA,EAAA,GAAA,IAAI,CAAC,WAAW,oCACf,CAAC,IAAI,CAAC,aAAa;;AAEhB,QAAA,EAAE,IAAI,CAAC,aAAa,CAAC,uBAAuB,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC,CAAC,EACpG;AACN,CAAC,CAAC;AAEF,IAAM,iBAAiB,GAAG,UAAC,OAAgB,EAAE,OAAkC,EAAE,MAAsB,EAAA;;AACnG,IAAA,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE;QACvB,OAAO;AACV,KAAA;AAED,IAAA,IAAM,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC;AAClC,IAAA,IAAM,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC;IAEjC,IAAM,OAAO,GAAG,SAAS,CAAC,CAAA,EAAA,GAAA,OAAO,CAAC,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,MAAM,CAAC,CAAC;IAClD,IAAM,OAAO,GAAG,SAAS,CAAC,CAAA,EAAA,GAAA,OAAO,CAAC,GAAG,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,MAAM,CAAC,CAAC;AAEjD,IAAA,IAAI,OAAO,KAAK,MAAM,IAAI,OAAO,KAAK,MAAM,EAAE;QAC1C,OAAO;AACV,KAAA;AAED,IAAA,IAAM,QAAQ,GAAG,YAAY,CAAC,WAAW,CAAC,SAAS,EAAE,QAAQ,EAAE,eAAe,CAAC,CAAC;IAChF,IAAM,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC,cAAc,CAAC,OAAO,CAAY,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;AAEzG,IAAA,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;AAC/B,QAAA,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QACzB,OAAO;AACV,KAAA;AAED,IAAA,IAAM,mBAAmB,GAAG,YAAA;AACxB,QAAA,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;AAClD,QAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;AAC1D,KAAC,CAAC;AAEF,IAAA,IAAM,QAAQ,GAAG,YAAA;AACb,QAAA,mBAAmB,EAAE,CAAC;QACtB,IAAM,UAAU,GAAG,OAAO,CAAC,QAAQ,+BAA+B,CAAC,CAAC;QACpE,OAAO,CAAC,aAAa,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;AACtD,KAAC,CAAC;AAEF,IAAA,IAAM,OAAO,GAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACN,MAAM,CAAA,EAAA,EACT,SAAS,EAAE,GAAG,EAAE,EAChB,MAAM,EAAA,MAAA,EACN,MAAM,EAAA,MAAA,EACN,OAAO,EAAA,OAAA,EACP,OAAO,EAAA,OAAA,EACP,KAAK,EAAE,CAAC,EACR,MAAM,EAAA,MAAA,EACN,QAAQ,EAAA,QAAA,GACX,CAAC;AAEF,IAAA,IAAM,YAAY,GAAG,YAAA;AACjB,QAAA,MAAM,CAAC,oBAAoB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC3C,QAAA,mBAAmB,EAAE,CAAC;AAC1B,KAAC,CAAC;AAEF,IAAA,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,EAAE;AAC3C,QAAA,OAAO,EAAE,IAAI;AACb,QAAA,IAAI,EAAE,IAAI;AACb,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,YAAY,EAAE;AAC/C,QAAA,OAAO,EAAE,IAAI;AACb,QAAA,IAAI,EAAE,IAAI;AACb,KAAA,CAAC,CAAC;IAEH,IAAI,CAAC,OAAO,CAAC,CAAC;AAClB,CAAC,CAAC;AAEF,IAAM,QAAQ,GAAG,UAAC,GAAY,EAAoB,EAAA,OAAC,GAAc,CAAC,MAAM,KAAK,GAAG,CAAA,EAAA,CAAC;AAQjF,IAAM,YAAY,GACd,UAAoC,UAA8C,EAAA;AAClF,IAAA,OAAA,UAAC,MAAM,EAAE,aAAa,EAAE,MAAM,EAAA;AACpB,QAAA,IAAA,EAAA,GAAA,MAAA,CAAyD,QAAQ,CAAC,MAAM,CAAC;AAC3E,cAAE,CAAC,gBAAgB,CAAC,MAAM,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,QAAQ,CAAC;AAC/D,cAAE,CAAC,MAAM,EAAE,SAAS,CAAC,EAAA,CAAA,CAAA,EAFlB,OAAO,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,UAAU,QAED,CAAC;QAE1B,IAAM,OAAO,GAAG,aAAa,KAAA,IAAA,IAAb,aAAa,KAAb,KAAA,CAAA,GAAA,aAAa,GAAI,EAAE,CAAC;AAEpC,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;YACpB,MAAM,IAAI,SAAS,CAAC,aAAa,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,CAAC;AAC9D,SAAA;AAED,QAAA,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,YAAA,MAAM,IAAI,SAAS,CAAC,6BAA6B,CAAC,UAAU,EAAE,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AAChG,SAAA;QAED,IAAI,UAAU,KAAK,UAAU,EAAE;AAC3B,YAAA,OAAO,CAAC,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,UAAU,CAAC;AAC5D,YAAA,OAAO,CAAC,GAAG,GAAG,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC;AAC5D,SAAA;AAED,QAAA,iBAAiB,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;KAC/C,CAAA;AArBD,CAqBC,CAAC;AAEO,IAAA,MAAM,mBAAmB,YAAY,CAAC,QAAQ,EAAE;AAChD,IAAA,QAAQ,mBAAmB,YAAY,CAAC,UAAU,EAAE;AACpD,IAAA,QAAQ,mBAAmB,YAAY,CAAC,UAAU,EAAE;AAE1D,IAAM,aAAa,GAAG,OAAgC;AACtD,IAAM,eAAe,GAAG,SAAkC;AAC1D,IAAM,eAAe,GAAG,SAAkC;AAE1D,IAAM,YAAY,GAAG,OAAsC;AAC3D,IAAM,cAAc,GAAG,SAAwC;AAC/D,IAAM,cAAc,GAAG;;ACpH9B;AACA,IAAM,oBAAoB,GAAG,UAAC,WAAmB,EAAA;AAC7C,IAAA,QAAQ,WAAW;AACf,QAAA,KAAK,eAAe,CAAC;AACrB,QAAA,KAAK,IAAI,CAAC;AACV,QAAA,KAAK,OAAO,CAAC;AACb,QAAA,KAAK,IAAI,CAAC;AACV,QAAA,KAAK,OAAO;YACR,OAAgC,CAAA,gCAAA;AAEpC,QAAA,KAAK,aAAa,CAAC;AACnB,QAAA,KAAK,IAAI,CAAC;AACV,QAAA,KAAK,OAAO;YACR,OAA8B,CAAA,8BAAA;AAElC,QAAA,KAAK,aAAa,CAAC;AACnB,QAAA,KAAK,OAAO;YACR,OAA8B,CAAA,8BAAA;AAElC,QAAA,KAAK,aAAa;YACd,OAA8B,CAAA,8BAAA;AAElC,QAAA,KAAK,aAAa;YACd,OAA8B,CAAA,8BAAA;AACrC,KAAA;IAED,OAAgC,CAAA,gCAAA;AACpC,CAAC,CAAC;AAIF,IAAM,gBAAgB,GAAG,UAAI,WAAwB,EAAE,KAAc,EAAE,IAAO,EAAE,IAAO,EAAA;;;IAEnF,IAAI,MAAM,GAAG,CAAI,CAAC;AAOlB;;;;;;;;;;AAUG;IACH,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,MAAM,+BAAuB;AAChC,KAAA;AAED,IAAA,QAAQ,WAAW;AACf;;;;;;;;;;AAUG;AACH,QAAA,KAAA,CAAA;;AAEI,YAAA,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;AAC7C,YAAA,EAAA,GAAA,MAAe,CAAA,CAAC,IAAI,EAAE,IAAI,CAAC,EAAA,CAAA,CAAA,EAA1B,IAAI,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,IAAI,QAAA,CAAiB;YAC5B,MAAM;AAEV;;;;;;;;;;AAUG;QACH,KAA4B,CAAA,8BAAA;AAC5B,QAAA,KAAA,CAAA;;AAEI,YAAA,MAAM,iCAAyB;YAC/B,MAAM;AAEV;;;;;;;;;;AAUG;AACH,QAAA,KAAA,CAAA;;AAEI,YAAA,MAAM,+BAAuB;YAC7B,MAAM;AACb,KAAA;AAED,IAAA,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;AAChC,CAAC,CAAC;AAEF,IAAM,WAAW,GAAG,UAAC,aAA4C,EAAA;IAC7D,IAAM,MAAM,GAAG,gBAAgB,CAC3B,oBAAoB,CAAC,aAAa,CAAC,WAAW,CAAC,EAC/C,aAAa,CAAC,SAAS,KAAK,KAAK,EACjC,SAAS,EACT,SAAS,CACZ,CAAC,CAAC,CAAC,CAAC;AACL,IAAA,OAAO,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC;AAC9B,CAAC,CAAC;AAEF;AACA,IAAM,mBAAmB,GAAG,UACxB,OAAwC,EACxC,WAAwB,EACxB,KAAc,EAAA;AAER,IAAA,IAAA,EAAA,GAAA,MAAA,CAAuB,gBAAgB,CACzC,WAAW,EACX,KAAK,EACL,OAAO,CAAC,KAAK,IAAI,OAAO,EACxB,OAAO,CAAC,MAAM,IAAI,SAAS,CAC9B,EAAA,CAAA,CAAA,EALM,MAAM,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,IAAI,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,IAAI,QAKxB,CAAC;IAEF,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,GAAG,CAAC,UAAC,KAAK,EAAE,KAAK,EAAA;AACjC,QAAA,QAAQ,KAAK;AACT,YAAA,KAAK,QAAQ;gBACT,OAAoC,CAAA,oCAAA;AACxC,YAAA,KAAK,SAAS;gBACV,OAAsC,CAAA,sCAAA;AAE1C,YAAA,SAAS;gBACL,IAAM,OAAO,GAAG,CAAC,MAAM,IAAI,KAAK,IAAI,CAAC,CAAC;AACtC,gBAAA,OAAO,CAAC,KAAK,KAAK,OAAO,MAAM,CAAC,OAAO,GAA6B,CAAA,yEAAgC;AACvG,aAAA;AACJ,SAAA;AACL,KAAC,CAA4B,CAAC;AAClC,CAAC,CAAC;AAEF;AACA;AACA;;;;;;;;AAQG;AACH,IAAM,UAAU,GAAG,UACf,KAAsB,EACtB,kBAA0B,EAC1B,gBAAwB,EACxB,aAAqB,EACrB,gBAAwB,EACxB,cAAsB,EACtB,WAAmB,EAAA;IAEnB,IAAI,KAAK,6CAAqC;AAC1C,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;AAED;;;;;;;;;;;;;;;;;;AAkBG;IACH,IACI,CAAC,gBAAgB,GAAG,kBAAkB,IAAI,cAAc,GAAG,gBAAgB;SAC1E,gBAAgB,GAAG,kBAAkB,IAAI,cAAc,GAAG,gBAAgB,CAAC,EAC9E;AACE,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCG;IACH,IACI,CAAC,gBAAgB,IAAI,kBAAkB,IAAI,WAAW,IAAI,aAAa;SACtE,cAAc,IAAI,gBAAgB,IAAI,WAAW,IAAI,aAAa,CAAC,EACtE;QACE,OAAiC,CAAA,iCAAA;AACpC,KAAA;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCG;IACH,IACI,CAAC,cAAc,GAAG,gBAAgB,IAAI,WAAW,GAAG,aAAa;SAChE,gBAAgB,GAAG,kBAAkB,IAAI,WAAW,GAAG,aAAa,CAAC,EACxE;QACE,OAAqC,CAAA,qCAAA;AACxC,KAAA;AAED,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,IAAM,WAAW,GAAG,UAAC,QAAuB,EAAA;AACxC,IAAA,OAAO,QAAQ,KAAK,SAAS,IAAI,QAAQ,KAAK,MAAM,CAAC;AACzD,CAAC,CAAC;AAEF,IAAM,eAAe,GAAG,UAAC,OAAgB,EAAA;;IACrC,IAAI;QACA,OAAO,CAAA,CAAA,EAAA,GAAA,OAAO,CAAC,aAAa,CAAC,WAAW,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,YAAY,KAAI,IAAI,CAAC;AAClE,KAAA;IAAC,OAAM,EAAA,EAAA;AACJ,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;AACL,CAAC,CAAC;AAEF,IAAM,YAAY,GAAG,UAAC,OAAgB,EAAE,aAA4C,EAAA;AAChF,IAAA,IAAI,OAAO,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,EAAE;AAC1F,QAAA,QACI,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC;AACpC,YAAA,WAAW,CAAC,aAAa,CAAC,SAAS,CAAC;AACpC,YAAA,OAAO,KAAK,gBAAgB,CAAC,OAAO,CAAC,EACvC;AACL,KAAA;AAED,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC,CAAC;AAEF,IAAM,aAAa,GAAG,UAAC,OAAgB,EAAA;AACnC,IAAA,IAAM,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC;AACjC,IAAA,IAAM,QAAQ,GAAG,OAAO,CAAC,aAAa,CAAC;AAEvC,IAAA,IAAI,QAAQ,KAAK,IAAI,IAAI,KAAK,KAAK,IAAI,EAAE;AACrC,QAAA,IAAI,KAAK,CAAC,QAAQ,wCAAwC,EAAE,EAAE;YAC1D,OAAQ,KAAoB,CAAC,IAAI,CAAC;AACrC,SAAA;AACD,QAAA,IAAI,KAAK,CAAC,QAAQ,+BAA+B,CAAC,EAAE;AAChD,YAAA,OAAO,eAAe,CAAC,OAAO,CAAC,CAAC;AACnC,SAAA;AACJ,KAAA;AAED,IAAA,OAAO,QAAQ,CAAC;AACpB,CAAC,CAAC;AAEF,IAAM,KAAK,GAAG,UAAC,KAAa,EAAE,GAAW,EAAE,GAAW,EAAA;IAClD,IAAI,KAAK,GAAG,GAAG,EAAE;AACb,QAAA,OAAO,GAAG,CAAC;AACd,KAAA;IAED,IAAI,KAAK,GAAG,GAAG,EAAE;AACb,QAAA,OAAO,GAAG,CAAC;AACd,KAAA;AAED,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC,CAAC;AAEF,IAAM,gCAAgC,GAAG,UACrC,aAAuB,EAAA;;IAGvB,OAAQ,CAAC,eAAe,EAAE,oBAAoB,CAAW,CAAC,MAAM,CAC5D,UAAC,QAAQ,EAAK,EAAA,OAAA,QAAQ,IAAI,aAAa,CAAC,eAAe,CAAC,KAAK,CAA/C,EAA+C,CAChE,CAAC,CAAC,CAAC,CAAC;AACT,CAAC,CAAC;AAEF,IAAM,wBAAwB,GAAG,UAC7B,OAAgB,EAChB,WAA8B,EAC9B,aAA4C,EAAA;AAEpC,IAAA,IAAA,GAAG,GAA0B,WAAW,IAArC,EAAE,KAAK,GAAmB,WAAW,CAAA,KAA9B,EAAE,MAAM,GAAW,WAAW,CAAtB,MAAA,EAAE,IAAI,GAAK,WAAW,KAAhB,CAAiB;IACjD,IAAM,cAAc,GAAG,gCAAgC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IAC/E,IAAI,CAAC,cAAc,EAAE;QACjB,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;AACrC,KAAA;IAED,IAAM,iBAAiB,GAAG,UAAC,IAAyC,EAAA;AAChE,QAAA,IAAM,KAAK,GAAG,aAAa,CAAC,gBAAgB,CAAC,EAAG,CAAA,MAAA,CAAA,cAAc,EAAI,GAAA,CAAA,CAAA,MAAA,CAAA,IAAI,CAAE,CAAC,CAAC;QAC1E,OAAO,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,IAAI,CAAC,CAAC;AACpC,KAAC,CAAC;IAEF,OAAO;AACH,QAAA,GAAG,GAAG,iBAAiB,CAAC,KAAK,CAAC;AAC9B,QAAA,KAAK,GAAG,iBAAiB,CAAC,OAAO,CAAC;AAClC,QAAA,MAAM,GAAG,iBAAiB,CAAC,QAAQ,CAAC;AACpC,QAAA,IAAI,GAAG,iBAAiB,CAAC,MAAM,CAAC;KACnC,CAAC;AACN,CAAC,CAAC;AAEF,IAAM,aAAa,GAAG,UAAC,KAAsB,EAAE,KAAa,EAAE,GAAW,EAAA;AACrE,IAAA,QAAQ,KAAK;AACT,QAAA,KAAA,CAAA;AACI,YAAA,OAAO,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,CAAC;AAE7B,QAAA,KAAA,CAAA;AACI,YAAA,OAAO,GAAG,CAAC;QAEf,KAA+B,CAAA,iCAAA;AAC/B,QAAA,KAAA,CAAA;AACI,YAAA,OAAO,KAAK,CAAC;AACpB,KAAA;AACL,CAAC,CAAC;AAEF,IAAM,gBAAgB,GAAG,UAAC,KAAc,EAAE,SAA4B,EAAA;;IAClE,IAAM,cAAc,GAAG,CAAA,EAAA,GAAA,KAAK,CAAC,aAAa,CAAC,WAAW,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,cAAc,CAAC;AACjE,IAAA,IAAA,KAAA,MACF,CAAA,KAAK,KAAK,gBAAgB,CAAC,KAAK,CAAC;AAC7B,UAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAA,EAAA,GAAA,cAAc,KAAd,IAAA,IAAA,cAAc,KAAd,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,cAAc,CAAE,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,KAAK,CAAC,WAAW,EAAE,CAAA,EAAA,GAAA,cAAc,aAAd,cAAc,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAd,cAAc,CAAE,MAAM,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,KAAK,CAAC,YAAY,CAAC;AAClG,UAAE,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,CAAC,GAAG,EAAE,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,YAAY,CAAC,EAAA,CAAA,CAAA,EAHzE,CAAC,QAAA,EAAE,CAAC,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,KAAK,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,MAAM,QAGsD,CAAC;AAEjF,IAAA,IAAM,IAAI,GAAG,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC;AAClC,IAAA,IAAM,GAAG,GAAG,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC;AAChC,IAAA,IAAM,KAAK,GAAG,IAAI,GAAG,KAAK,CAAC;AAC3B,IAAA,IAAM,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC;IAE5B,OAAO,CAAC,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAU,CAAC;AAC/C,CAAC,CAAC;AAEF,IAAM,qBAAqB,GAAG,UAAC,OAAgB,EAAE,OAA8B,EAAA;;IAE3E,IAAM,OAAO,GAAiC,EAAE,CAAC;AAEjD,IAAA,IAAI,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;AAC1C,IAAA,IAAI,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;IAE5C,IAAI,CAAC,WAAW,EAAE;AACd,QAAA,OAAO,OAAO,CAAC;AAClB,KAAA;IAED,IAAM,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;AACvD,IAAA,IAAM,KAAK,GAAG,aAAa,CAAC,SAAS,KAAK,KAAK,CAAC;AAEhD,IAAA,IAAM,WAAW,GAAG,oBAAoB,CACpC,aAAa,CAAC,WAAW;AACrB,QAAA,aAAa,CAAC,gBAAgB,CAAC,sBAAsB,CAAC;AACtD,QAAA,aAAa,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CACzD,CAAC;AAEI,IAAA,IAAA,KAAA,MAAmB,CAAA,mBAAmB,CAAC,OAAO,EAAE,WAAW,EAAE,KAAK,CAAC,IAAA,EAAlE,MAAM,QAAA,EAAE,MAAM,QAAoD,CAAC;IAEtE,IAAA,EAAA,GAAA,MAA6B,CAAA,wBAAwB,CAAC,OAAO,EAAE,OAAO,CAAC,qBAAqB,EAAE,EAAE,aAAa,CAAC,IAAA,EAA7G,GAAG,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,KAAK,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,MAAM,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,IAAI,GAAA,EAAA,CAAA,CAAA,CAAqF,CAAC;AAEnH,IAAA,KAAK,IAAI,KAAK,GAAG,aAAa,CAAC,OAAO,CAAC,EAAE,KAAK,KAAK,IAAI,EAAE,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,EAAE;AACnF,QAAA,IAAI,aAAa,KAAK,KAAK,CAAC,aAAa,EAAE;AACvC,YAAA,aAAa,GAAG,KAAK,CAAC,aAAa,CAAC;AACpC,YAAA,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;YACxC,IAAI,CAAC,WAAW,EAAE;gBACd,MAAM;AACT,aAAA;YAEK,IAAA,EAAA,GAAwB,KAAK,CAAC,qBAAqB,EAAE,EAA7C,EAAE,GAAA,EAAA,CAAA,IAAA,EAAO,EAAE,GAAA,EAAA,CAAA,GAAkC,CAAC;YAC5D,GAAG,IAAI,EAAE,CAAC;YACV,KAAK,IAAI,EAAE,CAAC;YACZ,MAAM,IAAI,EAAE,CAAC;YACb,IAAI,IAAI,EAAE,CAAC;AACd,SAAA;QAED,IAAM,UAAU,GAAG,WAAW,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;AAEvD,QAAA,IAAI,UAAU,CAAC,QAAQ,KAAK,OAAO,EAAE;YACjC,MAAM;AACT,SAAA;AAED,QAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE;YAClC,SAAS;AACZ,SAAA;AAED,QAAA,IAAM,SAAS,GAAG,KAAK,CAAC,qBAAqB,EAAE,CAAC;QAE1C,IAAA,EAAA,GAAA,OAAiD,gBAAgB,CAAC,KAAK,EAAE,SAAS,CAAC,EAAA,CAAA,CAAA,EAAlF,QAAQ,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,UAAU,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,WAAW,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,SAAS,GAAA,EAAA,CAAA,CAAA,CAAsC,CAAC;QAE1F,IAAM,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,GAAG,IAAI,CAAC,CAAC;QACxG,IAAM,OAAO,GAAG,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,KAAK,CAAC,YAAY,EAAE,GAAG,EAAE,MAAM,EAAE,MAAM,GAAG,GAAG,CAAC,CAAC;AAEzG,QAAA,IAAM,KAAK,GACP,OAAO,KAAK,IAAI,GAAG,CAAC,GAAG,aAAa,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,aAAa,CAAC,OAAO,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;AAC/G,QAAA,IAAM,KAAK,GACP,OAAO,KAAK,IAAI,GAAG,CAAC,GAAG,aAAa,CAAC,OAAO,EAAE,GAAG,EAAE,MAAM,CAAC,GAAG,aAAa,CAAC,OAAO,EAAE,QAAQ,EAAE,WAAW,CAAC,CAAC;AAE/G,QAAA,IAAM,KAAK,GAAG,WAAW,CAAC,UAAU,CAAC;cAC/B,KAAK,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC;cAC1F,KAAK,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;QAChG,IAAM,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;QAExG,OAAO,CAAC,IAAI,CAAC;YACT,KAAK;YACL,EAAE,IAAI,EAAE,KAAK,CAAC,UAAU,GAAG,KAAK,EAAE,GAAG,EAAE,KAAK,CAAC,SAAS,GAAG,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC,QAAQ,EAAE;AAC/F,SAAA,CAAC,CAAC;QAEH,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,KAAK,EAAE,QAAQ,CAAC,CAAC;QACtC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,EAAE,UAAU,CAAC,CAAC;QAC5C,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,EAAE,WAAW,CAAC,CAAC;QAC/C,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,EAAE,SAAS,CAAC,CAAC;AAC5C,KAAA;AAED,IAAA,OAAO,OAAO,CAAC;AACnB,CAAC,CAAC;IAEW,cAAc,GAAG,UAC1B,OAAgB,EAChB,qBAA6C,EAC7C,MAAsB,EAAA;AAEtB,IAAA,IAAM,OAAO,GAAG,qBAAqB,IAAI,EAAE,CAAC;AAE5C,IAAA,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;AAClC,QAAA,MAAM,IAAI,SAAS,CAAC,6BAA6B,CAAC,gBAAgB,EAAE,SAAS,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;AACrG,KAAA;IAED,IAAM,OAAO,GAAG,qBAAqB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAExD,IAAA,OAAO,CAAC,OAAO,CAAC,UAAC,EAAwB,EAAA;AAAxB,QAAA,IAAA,EAAA,GAAA,aAAwB,EAAvB,KAAK,GAAA,EAAA,CAAA,CAAA,CAAA,EAAE,eAAe,GAAA,EAAA,CAAA,CAAA,CAAA,CAAA;AACpC,QAAA,aAAa,CAAC,KAAK,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;AAClD,KAAC,CAAC,CAAC;AACP,EAAE;AAEK,IAAM,qBAAqB,GAAG;;ACtgBrC,IAAM,cAAc,GAChB,UAAC,UAAsB,EAAE,KAAY,EAAA;AACrC,IAAA,OAAA,UAAC,MAAsB,EAAA;AACnB,QAAA,IAAI,yBAAyB,CAAC,MAAM,CAAC,EAAE;YACnC,OAAO;AACV,SAAA;AAED,QAAA,IAAM,YAAY,GAAG;AACjB,YAAA,MAAM,EAAA,MAAA;AACN,YAAA,QAAQ,EAAA,QAAA;AACR,YAAA,QAAQ,EAAA,QAAA;SACX,CAAC,UAAU,CAAC,CAAC;QAEd,KAAK,CAAC,UAAU,EAAE,YAAA;YACd,IAAM,IAAI,GAAG,SAAS,CAAC;AACvB,YAAA,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;gBACxB,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAoB,EAAE,MAAM,CAAC,CAAC;gBACvD,OAAO;AACV,aAAA;AAED,YAAA,IAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAW,CAAC;AAC/B,YAAA,IAAM,GAAG,GAAG,IAAI,CAAC,CAAC,CAAW,CAAC;YAC9B,YAAY,CAAC,IAAI,EAAE,EAAE,IAAI,EAAA,IAAA,EAAE,GAAG,EAAA,GAAA,EAAE,CAAC,CAAC;AACtC,SAAC,CAAC,CAAC;KACN,CAAA;AAtBD,CAsBC,CAAC;AAEC,IAAM,qBAAqB,mBAAmB,cAAc,CAAC,QAAQ,EAAE,gBAAgB,EAAE;AACzF,IAAM,uBAAuB,mBAAmB,cAAc,CAAC,UAAU,EAAE,gBAAgB,EAAE;AAC7F,IAAM,uBAAuB,mBAAmB,cAAc,CAAC,UAAU,EAAE,gBAAgB,EAAE;AAEpG,IAAM,YAAY,GAAG,UAA+C,IAAO,EAAE,IAAwB,EAAA;IACjG,YAAY,CAAC,IAAI,CAAC,CAAC;AACnB,IAAA,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC3B,IAAA,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;AACxB,CAAC,CAAC;AAEK,IAAM,oBAAoB,mBAAmB,cAAc,CAAC,QAAQ,EAAE,YAAY,EAAE;AACpF,IAAM,sBAAsB,mBAAmB,cAAc,CAAC,UAAU,EAAE,YAAY,EAAE;AACxF,IAAM,sBAAsB,mBAAmB,cAAc,CAAC,UAAU,EAAE,YAAY;;AC1C7F,SAAS,4BAA4B,CAAgB,UAAoB,EAAA;IACrE,qBAAqB,CAAC,IAAI,EAAE;AACxB,QAAA,KAAK,EAAE,CAAA,UAAU,KAAV,IAAA,IAAA,UAAU,cAAV,UAAU,GAAI,IAAI,IAAG,OAAO,GAAG,KAAK;AAC3C,QAAA,MAAM,EAAE,SAAS;AACpB,KAAA,CAAC,CAAC;AACP,CAAC;AAEM,IAAM,6BAA6B,GAAG,UAAC,MAAsB,EAAA;AAChE,IAAA,IAAI,yBAAyB,CAAC,MAAM,CAAC,EAAE;QACnC,OAAO;AACV,KAAA;AAED,IAAA,IAAM,YAAY,GAAG,YAAY,CAAC,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,gBAAgB,EAAE,4BAA4B,CAAC,CAAC;AAEhH,IAAA,gBAAgB,CAAC,gBAAgB,EAAE,SAAS,cAAc,GAAA;QACtD,IAAM,IAAI,GAAG,SAAS,CAAC;AACvB,QAAA,IAAM,OAAO,GAAG,IAAI,CAAC,CAAC,CAAY,CAAC;QAEnC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,EAAE;AACxC,YAAA,qBAAqB,CAAC,IAAI,EAAE,OAAgC,EAAE,MAAM,CAAC,CAAC;YACtE,OAAO;AACV,SAAA;AAED,QAAA,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,IAAa,CAAC,CAAC;AAC5C,KAAC,CAAC,CAAC;AACP;;ACdO,IAAM,QAAQ,GAAG,UAAC,MAAsB,EAAA;AAC3C,IAAA,IAAI,yBAAyB,CAAC,MAAM,CAAC,EAAE;QACnC,OAAO;AACV,KAAA;IAED,qBAAqB,CAAC,MAAM,CAAC,CAAC;IAC9B,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAChC,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAChC,6BAA6B,CAAC,MAAM,CAAC,CAAC;IAEtC,oBAAoB,CAAC,MAAM,CAAC,CAAC;IAC7B,sBAAsB,CAAC,MAAM,CAAC,CAAC;IAC/B,sBAAsB,CAAC,MAAM,CAAC,CAAC;AACnC;;;;;;;;;;;;;;;;;;;;;;"}